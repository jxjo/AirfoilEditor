#!/usr/bin/env python
# -*- coding: utf-8 -*-

"""

Airfoil examples - hard coded  

"""
import io
import os
import logging
from typing                 import override

from .airfoil               import Airfoil, GEO_SPLINE, GEO_BASIC

logger = logging.getLogger(__name__)
# logger.setLevel(logging.WARNING)


class Airfoil_Example_Abstract (Airfoil): 

    isExample           = True
    workingDir_default  = None


    def __init__(self, geometry  = GEO_SPLINE , pathFileName='Abstract.dat', workingDir : str|None = None):
        """Abstract superclass for example airfoils """

        if not workingDir and self.workingDir_default:
            workingDir = self.workingDir_default

        super().__init__(geometry = geometry, name=None,  workingDir=workingDir)

        if workingDir and not os.path.isdir (workingDir):
            os.mkdir (workingDir)

        self.set_pathFileName (pathFileName, noCheck=True)              # set later as file does not exist (yet)
        self.set_isModified (True)                                      # will be saved on demand 

        self.load ()                                                    # get coordinates 

        logger.info (f"{self} created in '{self.workingDir}'")


    @property
    def isExisting (self):
        return True

    def _getCoordinates (self):
        """ returns the coordinates of example as a list of lines"""
        # to over load by subclass for specific airfoil data
        return []


    @override
    def load(self):
        # over loaded to read airfoil from code  and not from file
        file_lines = self._getCoordinates ()

        self._name, self._x, self._y = self._loadLines(file_lines)




class Example (Airfoil_Example_Abstract):
    """ An example airfoil - JX-GP-100_bezier.dat with reduced points"""

    def __init__(self, geometry = GEO_BASIC, pathFileName='Example.dat', **kwargs):
        super().__init__(geometry = geometry, pathFileName=pathFileName, **kwargs)


    def _getCoordinates (self):
        """ returns the coordinates of example as a list of lines"""

        output = io.StringIO()
        output.write ("JX-ST-150")
        output.write ("""
1.0000000 0.0001715
0.9922047 0.0013784
0.9828590 0.0028165
0.9716572 0.0045273
0.9582341 0.0065582
0.9421544 0.0089626
0.9245653 0.0115560
0.9070119 0.0141045
0.8894927 0.0166068
0.8720056 0.0190621
0.8545484 0.0214694
0.8371183 0.0238277
0.8197125 0.0261361
0.8023281 0.0283937
0.7849622 0.0305995
0.7676122 0.0327525
0.7502754 0.0348514
0.7329496 0.0368953
0.7156331 0.0388826
0.6983244 0.0408122
0.6810226 0.0426824
0.6637275 0.0444917
0.6464393 0.0462382
0.6291591 0.0479202
0.6118887 0.0495356
0.5946306 0.0510823
0.5773882 0.0525580
0.5601656 0.0539603
0.5429678 0.0552868
0.5258009 0.0565349
0.5086717 0.0577017
0.4915878 0.0587846
0.4745580 0.0597806
0.4575917 0.0606868
0.4406994 0.0615002
0.4238924 0.0622177
0.4071829 0.0628363
0.3905840 0.0633529
0.3741094 0.0637646
0.3577738 0.0640683
0.3415925 0.0642612
0.3255816 0.0643405
0.3097577 0.0643034
0.2941382 0.0641477
0.2787407 0.0638708
0.2635835 0.0634709
0.2486852 0.0629460
0.2340648 0.0622947
0.2197413 0.0615159
0.2057341 0.0606087
0.1920624 0.0595728
0.1787454 0.0584084
0.1658023 0.0571161
0.1532518 0.0556970
0.1411124 0.0541531
0.1294018 0.0524868
0.1181373 0.0507012
0.1073355 0.0488004
0.0970118 0.0467892
0.0871808 0.0446732
0.0778558 0.0424590
0.0690486 0.0401543
0.0607698 0.0377677
0.0530281 0.0353092
0.0458305 0.0327896
0.0391817 0.0302214
0.0330845 0.0276181
0.0275392 0.0249947
0.0225434 0.0223678
0.0180923 0.0197554
0.0141776 0.0171772
0.0107883 0.0146546
0.0079096 0.0122108
0.0055235 0.0098709
0.0036077 0.0076619
0.0021361 0.0056128
0.0010785 0.0037549
0.0004749 0.0023397
0.0001668 0.0013025
0.0000333 0.0005473
0.0000000 0.0000000
0.0001189 -0.0009764
0.0005689 -0.0021287
0.0015369 -0.0034826
0.0032905 -0.0050639
0.0061154 -0.0068461
0.0097369 -0.0085578
0.0141136 -0.0101965
0.0192072 -0.0117598
0.0249817 -0.0132458
0.0314037 -0.0146530
0.0384421 -0.0159801
0.0460678 -0.0172261
0.0542535 -0.0183907
0.0629737 -0.0194733
0.0722046 -0.0204739
0.0819237 -0.0213929
0.0921096 -0.0222306
0.1027422 -0.0229877
0.1138025 -0.0236652
0.1252720 -0.0242640
0.1371334 -0.0247856
0.1493696 -0.0252313
0.1619644 -0.0256027
0.1749019 -0.0259017
0.1881664 -0.0261300
0.2017427 -0.0262898
0.2156157 -0.0263831
0.2297703 -0.0264122
0.2441918 -0.0263793
0.2588650 -0.0262869
0.2737752 -0.0261375
0.2889073 -0.0259335
0.3042462 -0.0256775
0.3197766 -0.0253722
0.3354831 -0.0250202
0.3513502 -0.0246242
0.3673621 -0.0241868
0.3835030 -0.0237107
0.3997569 -0.0231988
0.4161075 -0.0226536
0.4325387 -0.0220779
0.4490341 -0.0214743
0.4655773 -0.0208455
0.4821521 -0.0201941
0.4987421 -0.0195227
0.5153312 -0.0188340
0.5319036 -0.0181303
0.5484435 -0.0174142
0.5649356 -0.0166881
0.5813651 -0.0159544
0.5977177 -0.0152155
0.6139798 -0.0144735
0.6301384 -0.0137308
0.6461816 -0.0129894
0.6620984 -0.0122515
0.6778788 -0.0115192
0.6935144 -0.0107943
0.7089979 -0.0100788
0.7243239 -0.0093746
0.7394884 -0.0086835
0.7544896 -0.0080072
0.7693276 -0.0073473
0.7840048 -0.0067056
0.7985263 -0.0060836
0.8128995 -0.0054827
0.8271349 -0.0049045
0.8412460 -0.0043505
0.8552495 -0.0038219
0.8691658 -0.0033201
0.8830189 -0.0028465
0.8968370 -0.0024022
0.9106522 -0.0019887
0.9245015 -0.0016071
0.9384263 -0.0012586
0.9524733 -0.0009445
0.9654399 -0.0006889
0.9763873 -0.0004992
0.9856296 -0.0003578
0.9934273 -0.0002516
1.0000000 -0.0001715""")
        
        output.seek(0)
        file_lines = output.readlines()
        output.close()
        return file_lines


class Root_Example (Airfoil_Example_Abstract):
    """ An example airfoil for root - JX-GT-15v2"""

    def __init__(self, geometry = GEO_BASIC, pathFileName='Root_Example.dat', **kwargs):
        super().__init__(geometry = geometry, pathFileName=pathFileName, **kwargs)

    def _getCoordinates (self):
        """ returns the coordinates of example as a list of lines"""

        output = io.StringIO()
        output.write ("JX-GT3-100")
        output.write ("""
1.0000000 0.0001467
0.9895133 0.0014138
0.9751814 0.0031434
0.9557473 0.0054836
0.9365984 0.0077821
0.9180573 0.0099982
0.9000477 0.0121396
0.8824985 0.0142128
0.8653436 0.0162239
0.8485215 0.0181780
0.8319760 0.0200796
0.8156549 0.0219326
0.7995108 0.0237402
0.7835005 0.0255050
0.7675852 0.0272291
0.7517300 0.0289139
0.7359039 0.0305603
0.7200797 0.0321689
0.7042341 0.0337396
0.6883471 0.0352720
0.6724022 0.0367653
0.6563861 0.0382181
0.6402888 0.0396291
0.6241030 0.0409962
0.6078246 0.0423173
0.5914522 0.0435899
0.5749867 0.0448114
0.5584318 0.0459788
0.5417935 0.0470892
0.5250798 0.0481392
0.5083010 0.0491257
0.4914693 0.0500451
0.4745986 0.0508939
0.4577045 0.0516687
0.4408044 0.0523660
0.4239166 0.0529822
0.4070613 0.0535139
0.3902593 0.0539577
0.3735327 0.0543105
0.3569045 0.0545690
0.3403983 0.0547304
0.3240384 0.0547920
0.3078496 0.0547511
0.2918570 0.0546055
0.2760859 0.0543534
0.2605618 0.0539929
0.2453099 0.0535228
0.2303556 0.0529420
0.2157237 0.0522502
0.2014386 0.0514471
0.1875241 0.0505330
0.1740035 0.0495089
0.1608989 0.0483759
0.1482316 0.0471359
0.1360220 0.0457915
0.1242888 0.0443456
0.1130498 0.0428019
0.1023209 0.0411647
0.0921167 0.0394391
0.0824496 0.0376307
0.0733305 0.0357461
0.0647680 0.0337924
0.0567688 0.0317777
0.0493369 0.0297109
0.0424742 0.0276017
0.0361798 0.0254607
0.0304503 0.0232995
0.0252793 0.0211305
0.0206576 0.0189672
0.0165726 0.0168241
0.0130087 0.0147165
0.0099469 0.0126611
0.0073647 0.0106755
0.0052359 0.0087785
0.0035305 0.0069898
0.0022148 0.0053307
0.0012509 0.0038234
0.0005967 0.0024913
0.0002148 0.0013922
0.0000433 0.0005755
0.0000000 0.0000000
0.0001785 -0.0010612
0.0007847 -0.0022142
0.0019423 -0.0034627
0.0036719 -0.0047276
0.0059373 -0.0059644
0.0087313 -0.0071702
0.0120465 -0.0083426
0.0158754 -0.0094791
0.0202102 -0.0105777
0.0250429 -0.0116362
0.0303652 -0.0126529
0.0361687 -0.0136262
0.0424448 -0.0145545
0.0491847 -0.0154366
0.0563793 -0.0162713
0.0640195 -0.0170577
0.0720961 -0.0177949
0.0805995 -0.0184823
0.0895200 -0.0191193
0.0988481 -0.0197056
0.1085736 -0.0202408
0.1186867 -0.0207250
0.1291772 -0.0211580
0.1400348 -0.0215401
0.1512492 -0.0218714
0.1628101 -0.0221525
0.1747068 -0.0223837
0.1869288 -0.0225657
0.1994655 -0.0226992
0.2123061 -0.0227849
0.2254398 -0.0228238
0.2388559 -0.0228168
0.2525435 -0.0227651
0.2664918 -0.0226698
0.2806897 -0.0225322
0.2951265 -0.0223534
0.3097912 -0.0221351
0.3246730 -0.0218785
0.3397608 -0.0215852
0.3550439 -0.0212567
0.3705114 -0.0208948
0.3861525 -0.0205010
0.4019564 -0.0200771
0.4179123 -0.0196248
0.4340097 -0.0191460
0.4502380 -0.0186424
0.4665865 -0.0181160
0.4830450 -0.0175685
0.4996030 -0.0170020
0.5162502 -0.0164183
0.5329767 -0.0158194
0.5497722 -0.0152071
0.5666270 -0.0145834
0.5835312 -0.0139504
0.6004753 -0.0133098
0.6174496 -0.0126636
0.6344450 -0.0120138
0.6514522 -0.0113621
0.6684621 -0.0107106
0.6854661 -0.0100610
0.7024554 -0.0094151
0.7194216 -0.0087748
0.7363564 -0.0081417
0.7532519 -0.0075176
0.7701001 -0.0069041
0.7868935 -0.0063028
0.8036248 -0.0057153
0.8202867 -0.0051429
0.8368725 -0.0045872
0.8533755 -0.0040495
0.8697894 -0.0035311
0.8861081 -0.0030331
0.9023257 -0.0025567
0.9184368 -0.0021029
0.9344362 -0.0016727
0.9503190 -0.0012669
0.9660804 -0.0008863
0.9814049 -0.0005383
0.9922751 -0.0003052
1.0000000 -0.0001467
""")      
        output.seek(0)
        file_lines = output.readlines()
        output.close()
        return file_lines



class Tip_Example (Airfoil_Example_Abstract):
    """ An example airfoil for tip - JX-GT-05v2"""

    def __init__(self, geometry = GEO_BASIC, pathFileName='Tip_Example.dat', **kwargs):
        super().__init__(geometry = geometry, pathFileName=pathFileName, **kwargs)

    def _getCoordinates (self):
        """ returns the coordinates of example as a list of lines"""

        output = io.StringIO()
        output.write ("JX-GT3-30")
        output.write ("""
1.0000000 0.0001540
0.9839409 0.0016338
0.9622187 0.0036280
0.9332079 0.0062780
0.9051621 0.0088254
0.8785537 0.0112294
0.8532553 0.0135035
0.8291472 0.0156602
0.8061175 0.0177107
0.7840621 0.0196655
0.7628838 0.0215335
0.7424927 0.0233232
0.7228053 0.0250417
0.7037450 0.0266955
0.6852410 0.0282901
0.6672286 0.0298303
0.6496490 0.0313199
0.6324487 0.0327622
0.6155794 0.0341597
0.5989980 0.0355144
0.5826660 0.0368274
0.5665496 0.0380996
0.5506191 0.0393309
0.5348492 0.0405213
0.5192182 0.0416698
0.5037084 0.0427753
0.4883052 0.0438363
0.4729976 0.0448508
0.4577774 0.0458167
0.4426395 0.0467315
0.4275813 0.0475926
0.4126028 0.0483970
0.3977062 0.0491417
0.3828959 0.0498236
0.3681782 0.0504394
0.3535611 0.0509858
0.3390543 0.0514596
0.3246689 0.0518574
0.3104173 0.0521761
0.2963128 0.0524124
0.2823699 0.0525632
0.2686038 0.0526258
0.2550302 0.0525974
0.2416656 0.0524754
0.2285266 0.0522576
0.2156301 0.0519420
0.2029932 0.0515269
0.1906327 0.0510109
0.1785654 0.0503930
0.1668079 0.0496727
0.1553763 0.0488495
0.1442861 0.0479240
0.1335522 0.0468966
0.1231888 0.0457687
0.1132093 0.0445419
0.1036260 0.0432187
0.0944504 0.0418018
0.0856925 0.0402947
0.0773614 0.0387015
0.0694648 0.0370270
0.0620089 0.0352767
0.0549986 0.0334566
0.0484371 0.0315737
0.0423261 0.0296356
0.0366656 0.0276507
0.0314538 0.0256281
0.0266872 0.0235780
0.0223602 0.0215111
0.0184657 0.0194392
0.0149943 0.0173748
0.0119348 0.0153316
0.0092738 0.0133239
0.0069959 0.0113671
0.0050836 0.0094775
0.0035173 0.0076725
0.0022751 0.0059704
0.0013331 0.0043905
0.0006651 0.0029533
0.0002527 0.0017181
0.0000541 0.0007457
0.0000000 0.0000000
0.0002663 -0.0015243
0.0011588 -0.0031255
0.0028371 -0.0047962
0.0053037 -0.0064234
0.0084811 -0.0079517
0.0123360 -0.0093822
0.0168366 -0.0107165
0.0219521 -0.0119562
0.0276527 -0.0131028
0.0339101 -0.0141582
0.0406969 -0.0151242
0.0479869 -0.0160027
0.0557548 -0.0167957
0.0639766 -0.0175053
0.0726290 -0.0181337
0.0816900 -0.0186831
0.0911385 -0.0191557
0.1009542 -0.0195540
0.1111178 -0.0198803
0.1216111 -0.0201372
0.1324165 -0.0203270
0.1435173 -0.0204524
0.1548978 -0.0205160
0.1665430 -0.0205203
0.1784386 -0.0204681
0.1905713 -0.0203620
0.2029281 -0.0202047
0.2154972 -0.0199990
0.2282673 -0.0197475
0.2412275 -0.0194531
0.2543680 -0.0191185
0.2676792 -0.0187464
0.2811524 -0.0183397
0.2947792 -0.0179010
0.3085521 -0.0174330
0.3224636 -0.0169385
0.3365072 -0.0164203
0.3506765 -0.0158809
0.3649659 -0.0153230
0.3793698 -0.0147492
0.3938833 -0.0141621
0.4085018 -0.0135643
0.4232211 -0.0129582
0.4380371 -0.0123462
0.4529463 -0.0117308
0.4679452 -0.0111143
0.4830309 -0.0104989
0.4982003 -0.0098869
0.5134508 -0.0092804
0.5287799 -0.0086814
0.5441853 -0.0080920
0.5596648 -0.0075139
0.5752161 -0.0069491
0.5908374 -0.0063992
0.6065267 -0.0058659
0.6222820 -0.0053506
0.6381014 -0.0048548
0.6539830 -0.0043799
0.6699249 -0.0039269
0.6859250 -0.0034970
0.7019811 -0.0030911
0.7180911 -0.0027100
0.7342527 -0.0023545
0.7504633 -0.0020252
0.7667202 -0.0017224
0.7830206 -0.0014464
0.7993613 -0.0011975
0.8157389 -0.0009755
0.8321498 -0.0007803
0.8485901 -0.0006116
0.8650554 -0.0004689
0.8815411 -0.0003516
0.8980422 -0.0002587
0.9145534 -0.0001894
0.9310687 -0.0001424
0.9475820 -0.0001164
0.9640865 -0.0001098
0.9802453 -0.0001205
0.9917739 -0.0001375
1.0000000 -0.0001540
""")      
        output.seek(0)
        file_lines = output.readlines()
        output.close()
        return file_lines
